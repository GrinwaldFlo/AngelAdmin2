<?phpdeclare(strict_types=1);namespace App\Error;use Cake\Error\ErrorLogger;use Cake\Http\Exception\MissingControllerException;use Cake\Controller\Exception\MissingActionException;use Cake\Http\Exception\NotFoundException;use Cake\Log\Log;use Psr\Http\Message\ServerRequestInterface;use Throwable;/** * Custom Error Logger *  * Reduces verbose logging for all 404 errors to single-line entries */class CustomErrorLogger extends ErrorLogger{    /**     * Log an exception with simplified format for all 404 errors     *     * @param \Throwable $exception Exception to log     * @param \Psr\Http\Message\ServerRequestInterface|null $request Request data     * @param bool $includeTrace Whether to include stack trace     * @return void     */    public function logException(Throwable $exception, ?ServerRequestInterface $request = null, bool $includeTrace = false): void    {        // Check if simplified logging is enabled (can be disabled via environment variable)        $enableSimplifiedLogging = env('ENABLE_SIMPLIFIED_404_LOGGING', true);                if ($enableSimplifiedLogging && $this->is404Exception($exception) && $request !== null) {            $requestUri = $request->getRequestTarget();            $this->logSimplified404($exception, $requestUri);            return;        }        // For all other exceptions, use the default logging behavior        parent::logException($exception, $request, $includeTrace);    }    /**     * Check if this is a 404-type exception     *     * @param \Throwable $exception The exception to check     * @return bool     */    protected function is404Exception(Throwable $exception): bool    {        return $exception instanceof MissingControllerException            || $exception instanceof MissingActionException            || $exception instanceof NotFoundException;    }    /**     * Log a simplified version of the 404 error     *     * @param \Throwable $exception The exception     * @param string $requestUri The request URI     * @return void     */    protected function logSimplified404(Throwable $exception, string $requestUri): void    {        $exceptionName = (new \ReflectionClass($exception))->getShortName();                $message = sprintf(            '[404] %s: %s',            $exceptionName,            $requestUri        );        // Use Log::write instead of accessing $_logger directly        Log::write('error', $message);    }}